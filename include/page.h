#ifndef PAGE
#define PAGE

const char mainPage[] PROGMEM = R"=====(<!DOCTYPE html><html lang="pl"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>

/* Style Main Content */
*{box-sizing:border-box;margin:0;padding:0}body,html{background-color:rgb(46,46,46);width:100%%;height:100%%}#top-navigation{background-color:rgb(27, 27, 27);width:100%%;height:50px;display:flex;justify-content:center;align-items:center}#top-navigation a{text-decoration:none;color:aliceblue;font-size:20px;margin-left:50px;font-weight:bold;cursor:pointer}#top-navigation a:hover{color:aquamarine}#top-navigation a.active-page{color:rgb(0,255,170)}.hidden-page{display:none}#top-navigation a:first-child{margin-left:0}#main-content{width:800px;height:calc(100%% - 50px);margin-left:auto;margin-right:auto}#main-content div{display:flex;justify-content:space-around;align-items:center;margin-left:auto;margin-right:auto;width:400px;height:50px;padding-top:20px;margin-top:20px}#main-content div:first-child{margin-top:0}#main-content form{width:40%%;display:flex;justify-content:center;align-items:center}#main-content form button[type="submit"]{width:100%%;height:50px;background-color:rgb(0, 177, 47);border:0;font-size:20px;font-weight:bold;color:aliceblue;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border:2px solid black;outline:none}#main-content form button[type="submit"]:active{width:95%%;height:45px;font-size:17px}#main-content span{font-size:110%%;color:azure;font-weight:bold;letter-spacing:1px}#message{position:absolute;width:400px;height:100px;top:20px;left:0;right:0;margin:auto;text-align:center;padding-top:30px;border-radius:20px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;-o-border-radius:20px;font-size:16px;font-weight:bold;color:aliceblue;animation:seeMessage 0.5s forwards cubic-bezier(0, 0, 0, 0), seeMessage 0.5s 1s forwards reverse cubic-bezier(0, 0, 0, 0);-webkit-animation:seeMessage 0.5s forwards cubic-bezier(0, 0, 0, 0), seeMessage 0.5s 1s forwards reverse cubic-bezier(0,0,0,0)}#message.error{background-color:rgb(181,0,0)}#message.info{background-color:green}@keyframes seeMessage{from{transform:translateY(-200%%);-webkit-transform:translateY(-200%%);-moz-transform:translateY(-200%%);-ms-transform:translateY(-200%%);-o-transform:translateY(-200%%)}to{transform:translateY(0%%);-webkit-transform:translateY(0%%);-moz-transform:translateY(0%%);-ms-transform:translateY(0%%);-o-transform:translateY(0%%)}}@media only screen and (max-width: 500px){#top-navigation{width:100%%}#top-navigation a{font-size:15px;margin-left:20px}#main-content{width:100%%}#main-content div{width:100%%}#message{width:250px;height:75px;font-size:13px}}

/* Style With Delay */
#withDelay{width:800px;height:calc(100%% - 50px);margin-left:auto;margin-right:auto}#withDelay form{width:100%%}#withDelay form label{width:13px;text-align:center;display:flex;justify-content:center;align-items:center;font-size:11px;font-weight:bold;color:aliceblue;float:left;height:68px}#withDelay form #divOne1{width:100%%;display:flex;justify-content:center;padding-top:20px}#withDelay form div div{width:13px;float:left;margin-left:5px}#withDelay form input{display:inline-block}#withDelay form button#buttonSub1{width:10%%;height:30px;background-color:rgb(0, 162, 177);border:0;font-size:15px;font-weight:bold;color:aliceblue;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border:2px solid black;outline:none;position:absolute;left:0;right:0;top:220px;margin:auto}#withDelay form button#buttonSub1:active{width:7%%;height:25px;font-size:13px;top:222.5px}#withDelay form #divTwo1{margin-top:85px}#withDelay form #divTwo1 p{color:aliceblue;text-align:center;font-size:20px;padding-top:20px}#withDelay form #divThree1{margin-top:30px;display:flex;justify-content:center;margin-left:40px}#withDelay form #divThree1 p{color:aliceblue;padding-top:25px}#withDelay form #inputH1,#inputMin1{width:42px;height:40px;font-size:20px;color:aliceblue;background-color:rgb(61, 61, 61);font-weight:bold}#withDelay form #divFour1 button#confirmDelay{width:40%%;height:50px;background-color:rgb(0, 177, 47);border:0;font-size:20px;font-weight:bold;color:aliceblue;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border:2px solid black;outline:none;position:absolute;left:0;right:0;top:500px;margin:auto}#withDelay form #divFour1 button#confirmDelay:active{width:37%%;height:45px;font-size:17px;top:502.5px}@media only screen and (max-width: 500px){#withDelay{width:100%%}#withDelay div{width:100%%}#withDelay form button#buttonSub1{width:20%%}#withDelay form button#buttonSub1:active{width:15%%}#withDelay form #divThree1{margin-left:15px;width:calc(100%% - 15px)}}

/* Style Plane Launch */
#planeLaunch{width:800px;height:calc(100%% - 50px);margin-left:auto;margin-right:auto}#planeLaunch #menu{float:right}#planeLaunch #menu #expand{width:100px;height:55px;background-color:rgb(27, 27, 27);margin-top:5px;position:absolute;top:50px;right:215px}#planeLaunch #menu #expand p{text-align:center;color:aliceblue;padding-top:5px;padding-bottom:5px;font-weight:bold;cursor:pointer}#planeLaunch #menu #expand p:hover{background-color:rgb(111, 111, 111)}#planeLaunch #menu #expand span{width:100%%;height:1px;background-color:rgb(143, 143, 143);display:block}#planeLaunch #menu #selected-menu{position:absolute;top:0px;right:105px;font-weight:bold;font-size:20px;color:aliceblue}#planeLaunch form{width:100%%}#planeLaunch form label{width:13px;text-align:center;display:flex;justify-content:center;align-items:center;font-size:11px;font-weight:bold;color:aliceblue;float:left;height:68px}#planeLaunch form #divOne2{width:100%%;display:flex;justify-content:center;padding-top:20px}#planeLaunch form div div{width:13px;float:left;margin-left:5px}#planeLaunch form input{display:inline-block}#planeLaunch form button#buttonSub2{width:10%%;height:30px;background-color:rgb(0, 162, 177);border:0;font-size:15px;font-weight:bold;color:aliceblue;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border:2px solid black;outline:none;position:absolute;left:0;right:0;top:220px;margin:auto}#planeLaunch form button#buttonSub2:active{width:7%%;height:25px;font-size:13px;top:222.5px}#planeLaunch form #divTwo2-1, #planeLaunch form #divTwo2-2{margin-top:85px;display:flex;justify-content:center;margin-top:130px}#planeLaunch form #divTwo2-1 span{width:30px;height:30px;padding-top:5.5px;margin-left:5px;font-size:16px;text-align:center;color:aliceblue;background-color:rgb(0, 200, 255);border-radius:50%%;-webkit-border-radius:50%%;-moz-border-radius:50%%;-ms-border-radius:50%%;-o-border-radius:50%%;display:inline-block;cursor:pointer}#planeLaunch form #divTwo2-1 span:active{background-color:rgb(0, 17, 169)}#planeLaunch form #divTwo2-1 span:hover{background-color:rgb(0, 119, 255);width:28px;height:28px;margin-top:1px;margin-left:6px}#planeLaunch form #divTwo2-2 input{color:aliceblue;background-color:rgb(61, 61, 61);width:200px;height:50px;font-size:20px;font-weight:bold}#planeLaunch form #divThree2{margin-top:50px;display:flex;justify-content:center;margin-left:40px}#planeLaunch form #divThree2 p{color:aliceblue;padding-top:25px}#planeLaunch form #inputH2,#inputMin2,#od_inputH2,#od_inputMin2,#do_inputH2,#do_inputMin2{width:42px;height:40px;font-size:20px;color:aliceblue;background-color:rgb(61, 61, 61);font-weight:bold}#planeLaunch form #myslnik{width:100px;height:2px;background-color:rgb(205, 205, 205);margin-top:20px;margin-left:50px;margin-right:50px}#planeLaunch form #divFour2 button#confirmPlane{width:40%%;height:50px;background-color:rgb(0, 177, 47);border:0;font-size:20px;font-weight:bold;color:aliceblue;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border:2px solid black;outline:none;position:absolute;left:0;right:0;top:500px;margin:auto}#planeLaunch form #divFour2 button#confirmPlane:active{width:37%%;height:45px;font-size:17px;top:502.5px}#planeLaunch form .weekHidden{display:none !important}.rozsowY{animation:rozsowY 0.3s forwards cubic-bezier(0, 0, 0, 0);-webkit-animation:rozsowY 0.3s forwards cubic-bezier(0,0,0,0)}.rozsowX{animation:rozsowX 0.2s forwards cubic-bezier(0, 0, 0, 0);-webkit-animation:rozsowX 0.2s forwards cubic-bezier(0, 0, 0, 0)}@media only screen and (max-width: 500px){.hidden{display:none !important}#planeLaunch{width:100%%}#planeLaunch #menu #expand{display:none;top:60px;right:15px}#planeLaunch #menu #icon{transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);font-size:30px;color:aliceblue;background-color:rgb(27, 27, 27);border-radius:50%%;font-weight:bold;width:30px;height:30px;-webkit-border-radius:50%%;-moz-border-radius:50%%;-ms-border-radius:50%%;-o-border-radius:50%%;float:right;display:block;padding-left:7px;position:absolute;top:60px;right:15px}#planeLaunch form button#buttonSub2{width:20%%}#planeLaunch form button#buttonSub2:active{width:15%%}#planeLaunch form #divThree2{margin-left:5px;width:calc(100%% - 5px)}#planeLaunch form #myslnik{width:20px;height:2px;background-color:rgb(205, 205, 205);margin-top:20px;margin-left:20px;margin-right:20px}#planeLaunch form #inputH2,#inputMin2,#od_inputH2,#od_inputMin2,#do_inputH2,#do_inputMin2{font-size:30px}#date{font-size:30px !important;text-align:center;height:40px !important;width:300px !important}}@keyframes rozsowX{from{transform-origin:right;transform:scaleX(1) translateY(0px);-webkit-transform:scaleX(1) translateY(0px);-moz-transform:scaleX(1) translateY(0px);-ms-transform:scaleX(1) translateY(0px);-o-transform:scaleX(1) translateY(0px);border-radius:50%%;-webkit-border-radius:50%%;-moz-border-radius:50%%;-ms-border-radius:50%%;-o-border-radius:50%%}to{transform-origin:right;transform:scaleX(3.333333333333333) scaleY(0.2) translateY(-35px);-webkit-transform:scaleX(3.333333333333333) scaleY(0.2) translateY(-35px);-moz-transform:scaleX(3.333333333333333) scaleY(0.2) translateY(-35px);-ms-transform:scaleX(3.333333333333333) scaleY(0.2) translateY(-35px);-o-transform:scaleX(3.333333333333333) scaleY(0.2) translateY(-35px);border-radius:0%%;-webkit-border-radius:0%%;-moz-border-radius:0%%;-ms-border-radius:0%%;-o-border-radius:0%%}}@keyframes rozsowY{from{transform-origin:top;transform:scaleY(0) translate(0, 0);-webkit-transform:scaleY(0) translate(0, 0);-moz-transform:scaleY(0) translate(0, 0);-ms-transform:scaleY(0) translate(0, 0);-o-transform:scaleY(0) translate(0,0)}to{transform-origin:top;transform:scaleY(1) translate(15px, -15px);-webkit-transform:scaleY(1) translate(15px, -15px);-moz-transform:scaleY(1) translate(15px, -15px);-ms-transform:scaleY(1) translate(15px, -15px);-o-transform:scaleY(1) translate(15px, -15px)}}

/* Code HTML */
</style><title>PodlewanieNaŚniadanie</title></head><body><!-- Górna nawigacja po stronie --><nav id="top-navigation"><a id="natychmiast" class="active-page">Natychmiast</a><a id="zOpoznieniem">Z opóźnieniem</a><a id="zaplanuj">Zaplanuj</a></nav><!-- Początkowy kontent po wejsciu na stronę (Natychmiastowe wyłączanie i włączanie) --><main id="main-content"></main><!-- Wyłączanie i włączanie z poóżnieniem --><main id="withDelay" class="hidden-page"><form action="/delay" id="form-delay"><div id="divOne1"></div><button id="buttonSub1" value="on">Włącz</button><div id="divTwo1"><p>z</p><p>opóźnieniem</p></div><div id="divThree1"><input type="number" name="godziny" id="inputH1" max="23" value="0"><p>&nbspH&nbsp&nbsp&nbsp&nbsp</p><input type="number" name="minuty" id="inputMin1" max="59" value="0"><p>&nbspMIN</p></div><div id="divFour1"><button id="confirmDelay">Zatwierdź opóźnienie</button></div></form></main><!-- Planowanie włączania i wyłączania w przyszłości --><main id="planeLaunch" class="hidden-page"><form action="/delay" id="form-delay"><div id="divOne2"></div><button id="buttonSub2" value="on">Włącz</button><div id="divTwo2-1"><span id="1" class="weekDay">P</span><span id="2" class="weekDay">W</span><span id="3" class="weekDay">Ś</span><span id="4" class="weekDay">C</span><span id="5" class="weekDay">P</span><span id="6" class="weekDay">S</span><span id="7" class="weekDay">N</span></div><div id="divTwo2-2" class="weekHidden"><input type="date" name="date" id="date"></div><div id="divThree2"><input type="number" name="godziny" id="od_inputH2" max="23" value="0"><p>&nbspH&nbsp&nbsp&nbsp&nbsp</p><input type="number" name="minuty" id="od_inputMin2" max="59" value="0"><p>&nbspMIN</p><span id="myslnik"></span><input type="number" name="godziny" id="do_inputH2" max="23" value="0"><p>&nbspH&nbsp&nbsp&nbsp&nbsp</p><input type="number" name="minuty" id="do_inputMin2" max="59" value="0"><p>&nbspMIN</p></div><div id="divFour2"><button id="confirmPlane">Zatwierdź plany</button></div></form><div id="menu"><div id="icon"><p>></p></div><div id="expand"><p id="weeks" class="hidden">Tygodniowe</p><span id="line" class="hidden"></span><p id="dates" class="hidden">Datowe</p><p id="selected-menu" class="hidden">></p></div></div></main></body><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script><script>

//Variables Array for switch
%ARRAY%

// Script Main Content
function initWebSocket(){(websocket=new WebSocket(gateway)).onopen=void 0,websocket.onclose=(()=>{setTimeout(initWebSocket,2e3)}),websocket.onmessage=onMessage}function onMessage(e){let t=JSON.parse(e.data);"refresh"==t.action&&location.reload(),t.turn?(document.getElementById(t.pin).style.backgroundColor="rgb(80, 80, 80)",document.getElementById(t.pin).innerHTML="Wyłącz",document.getElementById(t.pin).parentElement.parentElement.children[1].innerHTML="Włączony",document.getElementById(t.pin).parentElement.children[1].setAttribute("value","off")):(document.getElementById(t.pin).style.backgroundColor="rgb(0, 177, 47)",document.getElementById(t.pin).innerHTML="Włącz",document.getElementById(t.pin).parentElement.parentElement.children[1].innerHTML="Wyłączony",document.getElementById(t.pin).parentElement.children[1].setAttribute("value","on")),sendMessage&&(seeMessage("Pomyślnie wysłano żądanie","Gratulacje :)","info"),sendMessage=!1,clearTimeout(seenMessage))}function seeMessage(e,t,n){null!=document.getElementById("message")&&document.getElementById("message").remove();let o=document.createElement("div"),a=document.createElement("p"),i=document.createElement("p");document.getElementsByTagName("body")[0].appendChild(o),o.setAttribute("id","message"),o.setAttribute("class",n),o.appendChild(a),o.appendChild(i),a.innerHTML=e,i.innerHTML=t,setTimeout(()=>{o.remove(),a.remove(),i.remove()},1500)}var gateway,websocket,sendMessage,seenMessage;for(let e of elements){let t=document.createElement("div"),n=document.createElement("form"),o=document.createElement("input"),a=document.createElement("input"),i=document.createElement("button"),s=document.createElement("span"),r=document.createElement("span");document.getElementById("main-content").appendChild(t),t.appendChild(n),t.appendChild(s),t.appendChild(r),n.appendChild(o),n.appendChild(a),n.appendChild(i),n.setAttribute("action","/power"),n.setAttribute("method","POST"),o.setAttribute("type","hidden"),o.setAttribute("name","pin"),o.setAttribute("value",e[0]),a.setAttribute("type","hidden"),a.setAttribute("name","turn"),0==e[1]?a.setAttribute("value","on"):a.setAttribute("value","off"),i.setAttribute("type","submit"),i.setAttribute("class","sendInfo"),i.setAttribute("id",e[0]),1==e[1]&&(i.style.backgroundColor="rgb(80, 80, 80)"),0==e[1]?i.innerHTML="Włącz":i.innerHTML="Wyłącz",0==e[1]?s.innerHTML="Wyłączony":s.innerHTML="Włączony",r.innerHTML=e[2]}gateway=`ws://${window.location.hostname}/ws`,window.addEventListener("load",function onLoad(e){initWebSocket(),function t(){const e=document.getElementsByClassName("sendInfo");for(let t of e)t.addEventListener("click",e=>{e.preventDefault();let t=!1;"on"==e.target.parentElement.children[1].getAttribute("value")&&(t=!0),websocket.send(JSON.stringify({action:"power",pin:e.target.parentElement.children[0].getAttribute("value"),turn:t})),sendMessage=!0,1===websocket.readyState?seeMessage("Przykro mi ale wystąpił problem z wysłaniem żądania.","Spróbuj ponownie.","error"):seenMessage=setTimeout(()=>{seeMessage("Przykro mi ale wystąpił problem z wysłaniem żądania.","Spróbuj ponownie.","error")},2e3)})}()}),sendMessage=!1;

// Script With Delya
for(let e of elements){let t=document.createElement("div"),r=document.createElement("input"),n=document.createElement("label");document.getElementById("divOne1").appendChild(t),t.appendChild(r),t.appendChild(n);for(let t of e[2])n.appendChild(document.createTextNode(t)),n.appendChild(document.createElement("br"));r.setAttribute("type","checkbox"),r.setAttribute("name",e[2]),r.setAttribute("value",e[0]),r.setAttribute("class","chechkedPins"),n.setAttribute("for",e[2])}document.getElementById("buttonSub1").addEventListener("click",e=>{e.preventDefault(),"on"==e.target.getAttribute("value")?(e.target.style.backgroundColor="rgb(0, 68, 177)",e.target.innerHTML="Wyłącz",e.target.setAttribute("value","off")):"off"==e.target.getAttribute("value")&&(e.target.style.backgroundColor="rgb(0, 162, 177)",e.target.innerHTML="Włącz",e.target.setAttribute("value","on"))});

// Script Plane Launch
var checkedDay,element;for(let e of elements){let t=document.createElement("div"),n=document.createElement("input"),d=document.createElement("label");document.getElementById("divOne2").appendChild(t),t.appendChild(n),t.appendChild(d);for(let t of e[2])d.appendChild(document.createTextNode(t)),d.appendChild(document.createElement("br"));n.setAttribute("type","checkbox"),n.setAttribute("name",e[2]),n.setAttribute("value",e[0]),n.setAttribute("class","checkedPins2"),d.setAttribute("for",e[2])}document.getElementById("buttonSub2").addEventListener("click",e=>{e.preventDefault(),"on"==e.target.getAttribute("value")?(e.target.style.backgroundColor="rgb(0, 68, 177)",e.target.innerHTML="Wyłącz",e.target.setAttribute("value","off")):"off"==e.target.getAttribute("value")&&(e.target.style.backgroundColor="rgb(0, 162, 177)",e.target.innerHTML="Włącz",e.target.setAttribute("value","on"))}),document.getElementById("confirmPlane").addEventListener("click",e=>{e.preventDefault()}),document.getElementById("dates").addEventListener("click",()=>{document.getElementById("selected-menu").style.top="25px",document.getElementById("divTwo2-1").classList.add("weekHidden"),document.getElementById("divTwo2-2").classList.remove("weekHidden")}),document.getElementById("weeks").addEventListener("click",()=>{document.getElementById("selected-menu").style.top="0px",document.getElementById("divTwo2-1").classList.remove("weekHidden"),document.getElementById("divTwo2-2").classList.add("weekHidden")}),checkedDay=[];const weekDay=document.getElementsByClassName("weekDay");for(element of weekDay)element.addEventListener("click",e=>{-1==checkedDay.indexOf(e.target.getAttribute("id"))?(e.target.style.backgroundColor="rgb(0, 17, 169)",checkedDay.push(e.target.getAttribute("id"))):(e.target.style.backgroundColor="rgb(0, 200, 255)",checkedDay.splice(checkedDay.indexOf(e.target.getAttribute("id")),1))});document.getElementById("icon").addEventListener("click",e=>{document.getElementById("icon").children[0].style.display="none",document.getElementById("icon").classList.add("rozsowX"),setTimeout(function(){document.getElementById("expand").classList.add("rozsowY"),document.getElementById("expand").style.display="block",document.getElementById("icon").classList.add("hidden")},300),setTimeout(function(){document.getElementById("line").classList.remove("hidden"),document.getElementById("selected-menu").classList.remove("hidden"),document.getElementById("weeks").classList.remove("hidden"),document.getElementById("dates").classList.remove("hidden")},700)}),document.getElementById("confirmPlane").addEventListener("click",e=>{var t,n;e.preventDefault();const d=3600*document.getElementById("od_inputH2").value+document.getElementById(NaN),a=3600*document.getElementById("do_inputH2").value+document.getElementById(NaN),o=document.getElementById("buttonSub2").value;for(n of(t=[],document.getElementsByClassName("checkedPins2")))1==n.checked&&t.push(n.getAttribute("value"));if("weekHidden"==document.getElementById("divTwo2-2").className){const e="/planeWeek?pins="+t+"&turn="+o+"&hours="+d+","+a+"&dayWeek="+checkedDay;$.ajax({type:"POST",url:e,contentType:"application/json",data:{pins:t,turn:o,hours:d+","+a,dayWeek:checkedDay},dataType:"json",success:seeMessage("Pomyślnie wysłano żądanie","Gratulacje :)","info"),error:seeMessage("Przykro mi ale wystąpił problem z wysłaniem żądania.","Spróbuj ponownie.","error")})}else{const e=document.getElementById("date").value,n="/planeDate?pins="+t+"&turn="+o+"&hours="+d+","+a+"&date="+e;$.ajax({type:"POST",url:n,contentType:"application/json",data:{pins:t,turn:o,hours:d+","+a,date:e},dataType:"json",success:seeMessage("Pomyślnie wysłano żądanie","Gratulacje :)","info"),error:seeMessage("Przykro mi ale wystąpił problem z wysłaniem żądania.","Spróbuj ponownie.","error")})}});

// Script Change Page
document.getElementById('natychmiast').addEventListener('click', (event)=>{
    document.getElementById('natychmiast').classList.add('active-page');
    document.getElementById('zOpoznieniem').classList.remove('active-page');
    document.getElementById('zaplanuj').classList.remove('active-page');

    document.getElementById('main-content').classList.remove('hidden-page');
    document.getElementById('withDelay').classList.add('hidden-page');
    document.getElementById('planeLaunch').classList.add('hidden-page');
})

document.getElementById('zOpoznieniem').addEventListener('click', (event)=>{
    document.getElementById('zOpoznieniem').classList.add('active-page');
    document.getElementById('natychmiast').classList.remove('active-page');
    document.getElementById('zaplanuj').classList.remove('active-page');

    document.getElementById('main-content').classList.add('hidden-page');
    document.getElementById('planeLaunch').classList.add('hidden-page');
    document.getElementById('withDelay').classList.remove('hidden-page');
})

document.getElementById('zaplanuj').addEventListener('click', (event)=>{
    document.getElementById('zaplanuj').classList.add('active-page');
    document.getElementById('natychmiast').classList.remove('active-page');
    document.getElementById('zOpoznieniem').classList.remove('active-page');

    document.getElementById('withDelay').classList.add('hidden-page');
    document.getElementById('main-content').classList.add('hidden-page');
    document.getElementById('planeLaunch').classList.remove('hidden-page');
})

var gateway = `ws://${window.location.hostname}/ws`;
var websocket;
window.addEventListener('load', onLoad);
function initWebSocket() {
    console.log('Trying to open a WebSocket connection...');
    websocket = new WebSocket(gateway);
    websocket.onopen = console.log('Połączenie z ESP zostało otwarte.');
    websocket.onclose = () => { console.log('Połączenie z ESP zostało zamknięte ale nastąpi próba ponownego otwarcia połączenia.'); setTimeout(initWebSocket, 2000); };
    websocket.onmessage = onMessage; // <-- add this line
}

function onMessage(event) {
    let data = JSON.parse(event.data);

    if (data.action == "refresh") location.reload();

    console.log('dziala');
    if(data.action == "power"){
        if (!data.turn) {
            document.getElementById(data.pin).style.backgroundColor = "rgb(0, 177, 47)";
            document.getElementById(data.pin).innerHTML = "Włącz";
            document.getElementById(data.pin).parentElement.parentElement.children[1].innerHTML = "Wyłączony";
            document.getElementById(data.pin).parentElement.children[1].setAttribute("value", "on");
        } else {
            document.getElementById(data.pin).style.backgroundColor = "rgb(80, 80, 80)";
            document.getElementById(data.pin).innerHTML = "Wyłącz";
            document.getElementById(data.pin).parentElement.parentElement.children[1].innerHTML = "Włączony";
            document.getElementById(data.pin).parentElement.children[1].setAttribute("value", "off");
        }
    }else if(data.action == "withDelay"){
        console.log("delay");
    }

    if (sendMessage) { seeMessage('Pomyślnie wysłano żądanie', 'Gratulacje :)', 'info'); sendMessage = false; clearTimeout(seenMessage); }
    console.log(data);
}

function onLoad(event) {
    initWebSocket();
    initButton();
}

var sendMessage = false;
var seenMessage;
function initButton() {
    const sendInfo = document.getElementsByClassName("sendInfo");

    for (let element of sendInfo) {
        element.addEventListener('click', (event) => {
            event.preventDefault();

            let turnBool = false;
            if (event.target.parentElement.children[1].getAttribute('value') == "on") turnBool = true;

            websocket.send(JSON.stringify({ 'action': 'power', 'pin': event.target.parentElement.children[0].getAttribute('value'), 'turn': turnBool }));
            sendMessage = true;

            if (websocket.readyState === 1)
                seeMessage('Przykro mi ale wystąpił problem z wysłaniem żądania.', 'Spróbuj ponownie.', 'error');
            else
                seenMessage = setTimeout(() => {
                    seeMessage('Przykro mi ale wystąpił problem z wysłaniem żądania.', 'Spróbuj ponownie.', 'error');
                }, 2000)
        })
    }
    document.getElementById('confirmDelay').addEventListener('click', (event) => {
        event.preventDefault();

        let turnBool = 0;
        if (document.getElementById('buttonSub1').value == "on") turnBool = 1;

        var checkPinsDelay = [];
        for (var checkedElement of document.getElementsByClassName('chechkedPins')) {
            if (checkedElement.checked == true) {
                checkPinsDelay.push(parseInt(checkedElement.getAttribute('value')));
            }
        }

        websocket.send(JSON.stringify({ 'action': 'withDelay', 'pins': checkPinsDelay, 'turn': turnBool, 'delay': { 'hours': parseInt(document.getElementById('inputH1').value), 'minute': parseInt(document.getElementById('inputMin1') .value) }}));
        sendMessage = true;

        if (websocket.readyState === 1)
            seeMessage('Przykro mi ale wystąpił problem z wysłaniem żądania.', 'Spróbuj ponownie.', 'error');
        else
            seenMessage = setTimeout(() => {
                seeMessage('Przykro mi ale wystąpił problem z wysłaniem żądania.', 'Spróbuj ponownie.', 'error');
            }, 2000)
    })

}

</script></html>)=====";

//const char mainPagef[] PROGMEM = R"rawliteral(<!DOCTYPE html><html lang="pl"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PodlewanieNaŚniadanie</title><style>#planeLaunch{width:800px;height:calc(100% - 50px);margin-left:auto;margin-right:auto}#planeLaunch #menu{float:right}#planeLaunch #menu #expand{width:100px;height:55px;background-color:rgb(27,27,27);margin-top:5px;position:absolute;top:50px;right:215px}#planeLaunch #menu #expand p{text-align:center;color:aliceblue;padding-top:5px;padding-bottom:5px;font-weight:700;cursor:pointer}#planeLaunch #menu #expand p:hover{background-color:rgb(111,111,111)}#planeLaunch #menu #expand span{width:100%;height:1px;background-color:rgb(143,143,143);display:block}#planeLaunch #menu #selected-menu{position:absolute;top:0;right:105px;font-weight:700;font-size:20px;color:aliceblue}#planeLaunch form{width:100%}#planeLaunch form label{width:13px;text-align:center;display:flex;justify-content:center;align-items:center;font-size:11px;font-weight:700;color:aliceblue;float:left;height:68px}#planeLaunch form #divOne2{width:100%;display:flex;justify-content:center;padding-top:20px}#planeLaunch form div div{width:13px;float:left;margin-left:5px}#planeLaunch form input{display:inline-block}#planeLaunch form button#buttonSub2{width:10%;height:30px;background-color:rgb(0,162,177);border:0;font-size:15px;font-weight:700;color:aliceblue;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border:2px solid #000;outline:none;position:absolute;left:0;right:0;top:220px;margin:auto}#planeLaunch form button#buttonSub2:active{width:7%;height:25px;font-size:13px;top:222.5px}#planeLaunch form #divTwo2-1,#planeLaunch form #divTwo2-2{margin-top:85px;display:flex;justify-content:center;margin-top:130px}#planeLaunch form #divTwo2-1 span{width:30px;height:30px;padding-top:5.5px;margin-left:5px;font-size:16px;text-align:center;color:aliceblue;background-color:rgb(0,200,255);border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%;display:inline-block;cursor:pointer}#planeLaunch form #divTwo2-1 span:active{background-color:rgb(0,17,169)}#planeLaunch form #divTwo2-1 span:hover{background-color:rgb(0,119,255);width:28px;height:28px;margin-top:1px;margin-left:6px}#planeLaunch form #divTwo2-2 input{color:aliceblue;background-color:rgb(61,61,61);width:200px;height:50px;font-size:20px;font-weight:700}#planeLaunch form #divThree2{margin-top:50px;display:flex;justify-content:center;margin-left:40px}#planeLaunch form #divThree2 p{color:aliceblue;padding-top:25px}#planeLaunch form #inputH2,#inputMin2,#od_inputH2,#od_inputMin2,#do_inputH2,#do_inputMin2{width:42px;height:40px;font-size:20px;color:aliceblue;background-color:rgb(61,61,61);font-weight:700}#planeLaunch form #myslnik{width:100px;height:2px;background-color:rgb(205,205,205);margin-top:20px;margin-left:50px;margin-right:50px}#planeLaunch form #divFour2 button#confirmPlane{width:40%;height:50px;background-color:rgb(0,177,47);border:0;font-size:20px;font-weight:700;color:aliceblue;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border:2px solid #000;outline:none;position:absolute;left:0;right:0;top:500px;margin:auto}#planeLaunch form #divFour2 button#confirmPlane:active{width:37%;height:45px;font-size:17px;top:502.5px}#planeLaunch form .weekHidden{display:none!important}.rozsowY{animation:rozsowY 0.3s forwards cubic-bezier(0,0,0,0);-webkit-animation:rozsowY 0.3s forwards cubic-bezier(0,0,0,0)}.rozsowX{animation:rozsowX 0.2s forwards cubic-bezier(0,0,0,0);-webkit-animation:rozsowX 0.2s forwards cubic-bezier(0,0,0,0)}@media only screen and (max-width:500px){.hidden{display:none!important}#planeLaunch{width:100%}#planeLaunch #menu #expand{display:none;top:60px;right:15px}#planeLaunch #menu #icon{transform:rotate(90deg);-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);font-size:30px;color:aliceblue;background-color:rgb(27,27,27);border-radius:50%;font-weight:700;width:30px;height:30px;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%;float:right;display:block;padding-left:7px;position:absolute;top:60px;right:15px}#planeLaunch form button#buttonSub2{width:20%}#planeLaunch form button#buttonSub2:active{width:15%}#planeLaunch form #divThree2{margin-left:5px;width:calc(100% - 5px)}#planeLaunch form #myslnik{width:20px;height:2px;background-color:rgb(205,205,205);margin-top:20px;margin-left:20px;margin-right:20px}#planeLaunch form #inputH2,#inputMin2,#od_inputH2,#od_inputMin2,#do_inputH2,#do_inputMin2{font-size:30px}#date{font-size:30px!important;text-align:center;height:40px!important;width:300px!important}}@keyframes rozsowX{from{transform-origin:right;transform:scaleX(1) translateY(0);-webkit-transform:scaleX(1) translateY(0);-moz-transform:scaleX(1) translateY(0);-ms-transform:scaleX(1) translateY(0);-o-transform:scaleX(1) translateY(0);border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;-o-border-radius:50%}to{transform-origin:right;transform:scaleX(3.333333333333333) scaleY(.2) translateY(-35px);-webkit-transform:scaleX(3.333333333333333) scaleY(.2) translateY(-35px);-moz-transform:scaleX(3.333333333333333) scaleY(.2) translateY(-35px);-ms-transform:scaleX(3.333333333333333) scaleY(.2) translateY(-35px);-o-transform:scaleX(3.333333333333333) scaleY(.2) translateY(-35px);border-radius:0%;-webkit-border-radius:0%;-moz-border-radius:0%;-ms-border-radius:0%;-o-border-radius:0%}}@keyframes rozsowY{from{transform-origin:top;transform:scaleY(0) translate(0,0);-webkit-transform:scaleY(0) translate(0,0);-moz-transform:scaleY(0) translate(0,0);-ms-transform:scaleY(0) translate(0,0);-o-transform:scaleY(0) translate(0,0)}to{transform-origin:top;transform:scaleY(1) translate(15px,-15px);-webkit-transform:scaleY(1) translate(15px,-15px);-moz-transform:scaleY(1) translate(15px,-15px);-ms-transform:scaleY(1) translate(15px,-15px);-o-transform:scaleY(1) translate(15px,-15px)}}</style></head><body><!-- Górna nawigacja po stronie --><nav id="top-navigation"><a id="natychmiast" class="active-page">Natychmiast</a><a id="zOpoznieniem">Z opóźnieniem</a><a id="zaplanuj">Zaplanuj</a></nav><!-- Początkowy kontent po wejsciu na stronę (Natychmiastowe wyłączanie i włączanie) --><main id="main-content"></main><!-- Wyłączanie i włączanie z poóżnieniem --><main id="withDelay" class="hidden-page"><form action="/delay" id="form-delay"><div id="divOne1"></div><button id="buttonSub1" value="on">Włącz</button><div id="divTwo1"><p>z</p><p>opóźnieniem</p></div><div id="divThree1"><input type="number" name="godziny" id="inputH1" max="23" value="0"><p>&nbspH&nbsp&nbsp&nbsp&nbsp</p><input type="number" name="minuty" id="inputMin1" max="59" value="0"><p>&nbspMIN</p></div><div id="divFour1"><button id="confirmDelay">Zatwierdź opóźnienie</button></div></form></main><!-- Planowanie włączania i wyłączania w przyszłości --><main id="planeLaunch" class="hidden-page"><form action="/delay" id="form-delay"><div id="divOne2"></div><button id="buttonSub2" value="on">Włącz</button><div id="divTwo2-1"><span id="1" class="weekDay">P</span><span id="2" class="weekDay">W</span><span id="3" class="weekDay">Ś</span><span id="4" class="weekDay">C</span><span id="5" class="weekDay">P</span><span id="6" class="weekDay">S</span><span id="7" class="weekDay">N</span></div><div id="divTwo2-2" class="weekHidden"><input type="date" name="date" id="date"></div><div id="divThree2"><input type="number" name="godziny" id="od_inputH2" max="23" value="0"><p>&nbspH&nbsp&nbsp&nbsp&nbsp</p><input type="number" name="minuty" id="od_inputMin2" max="59" value="0"><p>&nbspMIN</p><span id="myslnik"></span><input type="number" name="godziny" id="do_inputH2" max="23" value="0"><p>&nbspH&nbsp&nbsp&nbsp&nbsp</p><input type="number" name="minuty" id="do_inputMin2" max="59" value="0"><p>&nbspMIN</p></div><div id="divFour2"><button id="confirmPlane">Zatwierdź plany</button></div></form><div id="menu"><div id="icon"><p>></p></div><div id="expand"><p id="weeks" class="hidden">Tygodniowe</p><span id="line" class="hidden"></span><p id="dates" class="hidden">Datowe</p><p id="selected-menu" class="hidden">></p></div></div></main></body><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>)rawliteral";
#endif
